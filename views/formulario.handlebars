<main class="container my-4">

  <!-- Topo: Cadastro + Filtro + Pesquisa -->
  <div class="topo d-flex justify-content-between align-items-center flex-wrap mb-4 fixed-top bg-white shadow-sm p-2">
    
    <!-- Esquerda -->
<div class="row g-2 align-items-center mb-2 mb-md-0">
  <div class="col-12 col-md-auto">
    <label class="cad" id="cadProduto">Cadastrar Produtos</label>
  </div>
  <div class="col-12 col-md-auto">
    <a href="/" class="btn cad">Página Inicial</a>
  </div>
  <div class="col-12 col-md-auto">
    <select onchange="listarCategoria(this)" name="categoria" id="filtroCategoria" class="form-select">
      <option selected disabled hidden>Escolha a categoria</option>
      <option value="todos" {{#if (eq categoriaSelecionada "todos")}}selected{{/if}}>Todos os produtos</option>
      <option value="alimenticio" {{#if (eq categoriaSelecionada "alimenticio")}}selected{{/if}}>Alimentício</option>
      <option value="eletronico" {{#if (eq categoriaSelecionada "eletronico")}}selected{{/if}}>Eletrônico</option>
      <option value="vestuario" {{#if (eq categoriaSelecionada "vestuario")}}selected{{/if}}>Vestuário</option>
    </select>
  </div>
</div>

    <!-- Direita -->
    <form action="/pesquisar" method="get" class="d-flex gap-2">
      <input type="text" name="termo" placeholder="Procurando algo?" class="form-control" required>
      <button type="submit" class="btn btn-primary">Pesquisar</button>
    </form>

    <a href="/logout" class="btn btn-danger btn-sm">Logout</a>
    
  </div>

  <!-- Formulário de Cadastro -->
  <div id="formularioCadastro" class="mb-5">
    <div class="row justify-content-center">
      <div class="col-12 col-md-6">
        {{> mensagens }}
        <form action="/cadastrar" method="post" enctype="multipart/form-data" class="p-4 shadow-sm rounded bg-white">
          <h4 class="mb-3 text-center">Cadastrar Produto</h4>
          <input type="text" name="nome" class="form-control mb-3" placeholder="Nome do Produto" autofocus>
          <input type="number" name="valor" class="form-control mb-3" placeholder="Valor do Produto">
          <input type="file" name="imagem" class="form-control mb-3">
          <select name="categoria" class="form-select mb-3">
            <option value="">Categoria do produto</option>
            <option value="alimenticio">Alimentício</option>
            <option value="eletronico">Eletrônico</option>
            <option value="vestuario">Vestuário</option>
          </select>
          <button type="submit" class="btn btn-primary w-100">Cadastrar</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Cards de Produtos -->
  <div id="containerCards">
    <div class="row g-4 justify-content-center">

      {{#if mensagem}}
        <div class="alert alert-warning text-center">{{mensagem}}</div>
      {{/if}}

      {{#each produtos}}
        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
          <div class="card produto-card shadow-sm h-100">
            <img src="../imagens/{{imagem}}" class="card-img-top" alt="{{nome}}">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">{{nome}}</h5>
              <p class="card-text">{{formatarKwanza valor}} Kz</p>
              <div class="mt-auto d-flex justify-content-between">
                <a href="/formularioEditar/{{codigo}}" class="btn btn-warning btn-sm">Editar</a>
                <a href="/remover/{{codigo}}/{{imagem}}" class="btn btn-danger btn-sm">Remover</a>
              </div>
            </div>
          </div>
        </div>
      {{/each}}

    </div>
  </div>

</main>

<script src="../js/formulario.js"></script>
